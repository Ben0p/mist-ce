<!DOCTYPE html>
<html xmlns:tal="http://xml.zope.org/namespaces/tal">

<head>
    <meta charset="utf-8"/>
    <title>${project}</title>
    <!-- include the Tools -->
    <script src="static/jquery.tools.min.js"></script>
    <link rel="stylesheet" type="text/css" href="static/main.css"/>
    <!--link rel="stylesheet" type="text/css" href="static/rainbow.css"/-->

    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="static/mist.js"></script>

    <link rel="stylesheet" media="all" href=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
</head>

<body lang="en">
    <div id="wrapper">
        <div id="header">
            <a href="/"><div id="logo-container"></div></a>
        </div>
        <div id="backends"
        <!-- tabs -->
        <ul class="css-tabs rounded-top drop-shadow">
            <li><a href="machines" class="medium" title="Manage your virtual machines.">machines</a></li>
            <li><a href="disks" class="medium" title="Manage your storage volumes.">disks</a></li>
            <li><a href="images" class="medium" title="Manage boot images.">images</a></li>
            <li><a href="networks" class="medium" title="Configure networking.">network</a></li>
        </ul>
        <div class="css-panes rounded-bottom drop-shadow">
            <div id="machines-pane" style="display:block"></div>
            <div id="disks-pane" style="display:block"></div>
            <div id="images-pane" style="display:block"></div>
            <div id="networks-pane" style="display:block"></div>
        </div>

    </div>
    <!-- activate tabs with JavaScript -->
    <script>
        $(function() {
            $("ul.css-tabs").tabs("div.css-panes div", {
                effect: 'fade',
                onBeforeClick: function(event, i) {
                    var me = this,
                        tab = me.getTabs().eq(i),
                        paneswrapper = $('.css-panes'),
                        panes = paneswrapper.children(),
                        newpane = panes.eq(i),
                        rest = panes.not(newpane).not($('.large-spinner'));

                    tab.addClass('waiting');

                    // Why??
                    //panes.show().fadeOut(300);

                    // This solves various transition issues, like misplaced
                    // elements. Don't ask me.
                    panes.width(paneswrapper.width());

                    // Explicitly set height
                    paneswrapper.height(paneswrapper.height());

                    //fetch content using ajax
                    newpane.load(me.getTabs().eq(i).attr("href"), function(){
                        paneswrapper.animate({height : newpane.outerHeight(true)}, 300, function() {
                            paneswrapper.height('auto');
                        });
                        rest.html('');
                        newpane.hide().fadeIn(300);
                        tab.removeClass('waiting');
                    });
                }
            });
        });
        $("ul.css-tabs a").tooltip({effect: 'fade', predelay: 1000, delay: 2, position: 'top center', opacity: 0.8});
        var backends = [];
    </script>
    <script tal:repeat="backend backends" tal:content="string:backends.push(new Backend('${backend['id']}','${backend['title']}',${backend['provider']},${backend['poll_interval']},${backend.host|'undefined'}));" />
    <div id="footer">created by <a href="https://unweb.me" title="state of the art information systems">unweb.me</a></div>
</body>
</html>
