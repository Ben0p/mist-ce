<ul class="actions" >
    <li id="create"><a class="enabled" rel="#wizard">Create</a></li>
    <li id="start"><a>Start</a></li>
    <li id="reboot"><a>Reboot</a></li>
    <li id="destroy"><a>Destroy</a></li>
    <li id="configure"><a>Configure</a></li>
</ul>

<div class="machines">
    <div tal:repeat="node nodes">
        <div class="node" tal:attributes="id node.id">
        <input type="checkbox" tal:attributes="id string:chk-${node.id}" />
        <h3 tal:content="node.name">test</h3>
        <span tal:content="node.state"></span>
        <span tal:content="node.public_ip"></span>
        </div>
        <hr />
    </div>
</div>

<!-- the form -->
<form action="#">
    <div class="overlay" id="wizard">
        <h2>
            <strong>Create a new Virtual Machine</strong>
        </h2>
        <ul>
            <!-- instance name -->
            <li class="required">
                <label>
                    <strong>1.</strong> Instance name <em>e.g. My mail server.</em>
                    <br />
                    <input type="text" class="text" name="instance_name" />
                </label>
            </li>
            <!-- image -->
            <li class="required">
                <label>
                    <strong>2.</strong> Select an image <br />
                    <select name="image">
                        <option value="">-- please select --</option>
                        <option tal:repeat="image images" tal:attributes="id image.id" tal:content="image.name">Ubuntu 10.04 x86_64 server</option>
                    </select>
                </label>
            </li>
            <!-- size -->
            <li class="required">
                <label>
                    <strong>3.</strong> Select VM size<br />
                    <select name="size">
                        <option value="">-- please select --</option>
                        <option tal:repeat="size sizes" tal:attributes="id size.id" tal:content="size.name">small</option>
                    </select>
                </label>
            </li>
            <li class="clearfix">
                 <button type="button" class="start right">Start VM</button>
            </li>

        </ul>
    </div>
</form>

<script>
$(function() {
    $("#create .enabled[rel]").overlay({
            top: 'center',
            mask: {
                color: '#000',
                opacity: '.4'
            },
            effect: 'apple'
        });
    });

$(function() {
    // validation logic is done inside the onBeforeSeek callback
    $('.start').click(function() {
        inputs = $('#wizard').find(".required :input").removeClass("error"),
        empty = inputs.filter(function() {
           return $(this).val().replace(/\s*/g, '') == '';
        });
         // if there are empty fields, then
        if (empty.length) {
            // add a CSS class name "error" for empty & required fields
            empty.addClass("error");
            // cancel seeking of the scrollable by returning false
            return false;
        } else {    // everything is good
            alert('ok');
        }
    });

    $('.cancel').click(function() {
        $("#create .enabled[rel]").overlay().close();
    });

});

</script>
