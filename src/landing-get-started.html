<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/typed-text/typed-text.html">
<link rel="import" href="../bower_components/paper-styles/shadow.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icons/hardware-icons.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-tooltip/paper-tooltip.html">

<link rel="import" href="shared-styles.html">

<dom-module id="landing-get-started">
    <template>
        <custom-style>
            <style is="custom-style" include="iron-flex"></style>
        </custom-style>
        <style include="shared-styles"></style>
        <style>
        paper-material {
            @apply(--shadow-elevation-2dp);
        }
        
        .hero {
            padding: 48px 0;
        }
        
        :host {
            display: block;
        }

        :host {
            --paper-tooltip: {
                font-size: 16px;
                line-height: 24px;
            }
        }
        .center {
            margin: 0 auto;
        }
        
        .text-center {
            text-align: center;
        }
        
        paper-button {
            background-color: #0099cc;
            color: #fff;
            font-size: 18px;
            height: 54px;
            font-weight: 500;
        }
        paper-button a {
            color: #fff !important;
        }
        .plan paper-button {
            width: 80% !important;
            margin-top: 24px;
        }
        
        a {
            font-weight: 400 !important;
            text-decoration: none;
        }
        
        .col {
            width: 50%;
            box-sizing: border-box;
        }
        
        .pad {
            padding: 16px;
        }
        
        @media only screen and (max-width: 943px) {
            typed-text {
                display: block;
            }
        }

        .contains > .grid-row {
            align-items: flex-start;
        }
        
        #placeholder {
            opacity: 0;
            background-color: grey;
            @apply(--layout-fit);
            z-index: -1;
        }
        
        .plan {
            margin-top: 50px;
            margin-bottom: 50px;
            overflow: auto;
            background-color: #fff;
            @apply(--shadow-elevation-4dp);
        }
        .plan .icon {
            border-radius: 50%;
            background-color: #fff;
            width: 48px;
            padding: 8px;
            height: 48px;
        }
        .plan-head {
            padding: 2rem 0;
            border-bottom: 4px solid;
        }

        .green .plan-head  {
            border-color: green;
        }

        .purple .plan-head {
            border-color: purple;
        }

        .blue .plan-head {
            border-color: #3F51B5;
        }
        .plan, .plan > * {
            box-sizing: border-box;
            margin: 0;
        }

        .title {
            color: #fff;
            text-transform: uppercase;
            padding: 20px 0;
            font-size: 24px;
        }
        
        .plan-body-item {
            padding: 20px 20px;
        }
        
        @media only screen and (max-width: 600px) {
            .plan-body-item {
                min-height: 50px;
            }
        }
        
        .plan-body-item + .plan-body-item {
            border-top: 1px solid #d4d4d4;
        }
        
        .plan-body-item:last-child {
            border-bottom: 1px solid #d4d4d4;
        }
        
        .plan-body-item.highlight {
            background-color: #f2f2f2;
        }

        .plan-body-item:first-child{
            min-height: 115px;
        }
        
        .plan-body-item > * {
            width: 100%;
        }
        
        .valign {
            display: block;
        }
        
        .price {
            font-weight: 700;
            line-height: 1;
            padding: 0;
            margin: 8px;
        }
        
        .price sub,
        .price sup {
            font-size: 18px;
            font-weight: 300;
            vertical-align: middle;
        }

        sub > sub {
            font-size: 12px !important;
            display: block;
            margin-top: 8px;
        }
        
        .price sup {
            font-size: 24px;
            padding: 0 5px;
        }

        .price sub.month {
            margin-left: -54px;
            top: 6px;
        }

        .price sup.vcpu {
            top: -15px;
        }

        .plan-head sub iron-icon {
            width: 32px;
            height: 32px;
            top: -2px;
            left: -2px;
        }
        
        paper-button#enterpriseBtn {
            background-color: #4caf50;
            /*green*/
            display: block-inline;
            line-height: 54px;
            margin-left: 0 !important;
            margin-right: 0 !important;
        }
        ul {
            padding: 0;
            margin: 0;
        }
        ul li {
            margin-left: 15px;
            clear: both;
            list-style: none;
        }
        .bold {
            font-weight: 500;
        }
        ul.feature-list {
            display: block;
            margin: 1em auto;
        }
        ul.feature-list li {
            margin-left: 0;
            text-align: left;
            cursor: pointer;
            line-height: 1.8em;
        }
        ul.feature-list li p {
            height: 0;
            opacity: 0;
            margin: 0;
            font-size: 0.8em;
            padding-left: 55px;
            transform: translate3d(-100%, 0);
            transition: all 100ms ease-in;
        }
        ul.feature-list li p.visible {
            height: auto;
            margin-top: 4px;
            margin-bottom: 16px;
            opacity: 0.87;
            transform: translate3d(0, 0);
            transition: all 300ms linear;
        }
        ul.feature-list li iron-icon {
            opacity: 0.54;
            margin: 0 16px;
            width: 1em;
            height: 1em;
        }
        @media screen and (max-width: 768px){
            .includes > div {
                text-align: center;
            }
            .includes ul, .includes li {
                margin: 0;
                padding: 0;
            }
        }

        h4.pricetext {
            line-height: 2.36em;
        }

        .grey {
            background-color: #f2f2f2;
        }

        div.back {
            float: left;
            margin-top: 24px;
            text-transform: uppercase;
            font-size: 0.8em;
        }

        div.back a {
            line-height: 4.5em;
            vertical-align: middle;
            color: #000 !important;
        }

        h2.decorated {
            margin-left: 32px;
            margin-right: 32px;
        }
        </style>
        <div id="placeholder"></div>
        <div id="container">
            <div class="section grey">
                <div class="hero text-center">
                    <div class="back">
                        <a href="/"><iron-icon icon="icons:arrow-back"></iron-icon></a>
                    </div>
                    <h2 class="decorated">Choose your Mist.io</h2>
                </div>
            </div>
            <div class="section grey">
                <div class="contains">
                    <div class="grid-row items-center">

                        <!-- community -->
                        <div class="xs12 s6 m4 l4 margin-bottom valign-top">
                            <div class="plan green text-center">
                                <div class="plan-head">
                                    <h4>Community Edition<br/><sub><iron-icon icon="social:share"></iron-icon>CE</sub></h4>
                                </div>
                                <div class="plan-body">
                                    <div class="plan-body-item">
                                        <p class="valign">Ideal for personal projects and small teams with a DIY approach.</p>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="valign">
                                            <h4>Free forever</h4>
                                            <h4 class="price"><sub><a href="https://github.com/mistio/mist.io/blob/master/LICENSE" target="new">AGPL</a> licensed</sub></h4>
                                        </div>
                                    </div>
                                    <div class="plan-body-item grey">
                                        <div>
                                            <a aria-label="Clone github repo" target="new" href="https://github.com/mistio/mist.io/releases/latest" tabindex="-1">
                                                <paper-button raised on-click="_signUpClick0">Download</paper-button>
                                            </a>
                                            <p>Install on premises</p>
                                        </div>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="bold">Features:</div>
                                        <ul class="feature-list">
                                            <li id="unlimited-machines">
                                                <iron-icon icon="help"></iron-icon> Unlimited clouds &amp; machines
                                                <paper-tooltip for="unlimited-machines" animation-delay="0" position="top">Manage all of you infrastructure.</paper-tooltip>
                                            </li>
                                            <li id="unlimited-users">
                                                <iron-icon icon="help"></iron-icon> Unlimited users &amp; teams
                                                <paper-tooltip for="unlimited-users" animation-delay="0" position="top">Invite unlimited users and organize them in teams.</paper-tooltip>
                                            </li>
                                            <li id="script-key-management">
                                                <iron-icon icon="help"></iron-icon> Script &amp; Key management 
                                                <paper-tooltip for="script-key-management" animation-delay="0" position="top">
                                                    Generate and store SSH keys associated to machines.<br/>Use them to run your scripts and playbooks.
                                                </paper-tooltip>
                                            </li>
                                            <li id="scheduled-actions">
                                                <iron-icon icon="help"></iron-icon> Scheduled actions
                                                <paper-tooltip for="scheduled-actions" animation-delay="0" position="top">Multi-cloud crontab to schedule script executions and machine actions.</paper-tooltip>
                                            </li>
                                            <li id="web-shell">
                                                <iron-icon icon="help"></iron-icon> Web shell
                                                <paper-tooltip for="web-shell" animation-delay="0" position="top">Connect interactively to machines through the browser.<br/> Record all shell sessions.</paper-tooltip>
                                            </li>
                                            <li id="rest-api">
                                                <iron-icon icon="help"></iron-icon> REST API 
                                                <paper-tooltip for="rest-api" animation-delay="0" position="top">Issue revokable tokens and build robust automations.<br/> The Mist.io API provides a uniform abstraction on top of the cloud provider API's.<br /> </paper-tooltip>
                                            </li>
                                            <li id="audit-logs"><iron-icon icon="help"></iron-icon> Audit logs
                                                <paper-tooltip for="audit-logs" animation-delay="0" position="top">All actions leave audit trails. All infrastructure changes observed are being logged.</paper-tooltip>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="valign bold">Community Support</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- enterprise -->
                        <div class="xs12 s6 m4 l4 margin-bottom valign-top">
                            <div class="plan purple text-center">
                                <div class="plan-head">
                                    <h4>Enterprise Edition<br/><sub><iron-icon icon="icons:account-balance"></iron-icon>EE</sub></h4>
                                </div>
                                <div class="plan-body">
                                    <div class="plan-body-item">
                                        <p class="valign">Ideal for medium and large teams with advanced needs around orchestration &amp; access control.</p>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="valign">
                                            <h2 class="price" id="vcpus-ee">
                                                <sup>$</sup>1<sup class="vcpu">/vcpu</sup><sub class="month">/month</sub>
                                            </h2>
                                            <paper-tooltip for="vcpus-ee" animation-delay="0" position="top">high water mark of physical and virtual cores under management</paper-tooltip>
                                            <h4 class="price"><sub>if paid annually</sub></h4>
                                        </div>
                                    </div>
                                    <div class="plan-body-item grey">
                                        <div>
                                            <a aria-label="Buy Licence" href="/buy-license" tabindex="-1">
                                                <paper-button raised on-click="_signUpClick1">Purchase Licence</paper-button>
                                            </a>
                                            <p>Install on premises</p>
                                        </div>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="bold">All features from CE plus:</div>
                                        <ul class="feature-list">
                                            <li id="rbac">
                                                <iron-icon icon="help"></iron-icon> Role based Access Control
                                                <paper-tooltip for="rbac" animation-delay="0" position="top">Delegate access with fine grained controls. Use tags to enforce policies across clouds.</paper-tooltip>
                                            </li>
                                            <li id="monitoring-alerting">
                                                <iron-icon icon="help"></iron-icon> Monitoring &amp; Alerting
                                                <paper-tooltip for="monitoring-alerting" animation-delay="0" position="top">Gather system, application &amp; custom business metrics.<br/> Configure rules that trigger alerts &amp; automated responses.</paper-tooltip>
                                            </li>
                                            <li id="cost-insights">
                                                <iron-icon icon="help"></iron-icon> Cost Insights
                                                <paper-tooltip for="cost-insights" animation-delay="0" position="top">Understand your infrastructure costs, broken down by tags and clouds. <br/>Corellate with utilization to start optimizing performance vs money spent.</paper-tooltip>
                                            </li>
                                            <li id="orchestration">
                                                <iron-icon icon="help"></iron-icon> Orchestration
                                                <paper-tooltip for="orchestration" animation-delay="0" position="top">Streamline the deployment and lifecycle of complex architectures across clouds. <br/>Define topologies and workflows with TOSCA blueprints. Use Mist.io to deploy and manage your stacks.</paper-tooltip>
                                                
                                            </li>
                                            <li id="msp-reseller">
                                                <iron-icon icon="help"></iron-icon> MSP / reseller accounts<sup>beta</sup>
                                                <paper-tooltip for="msp-reseller" animation-delay="0" position="top">Resell hybrid infrastructure to your customers. Contact us to join private beta.</paper-tooltip>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="valign bold" id="premium-support">
                                            Premium Support
                                            <paper-tooltip for="premium-support" animation-delay="0" position="top">Next business day.</paper-tooltip>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- saas -->
                        <div class="xs12 s6 m4 l4 margin-bottom valign-top">
                            <div class="plan blue text-center">
                                <div class="plan-head">
                                    <h4>Hosted Edition<br/><sub><iron-icon icon="icons:cloud-circle"></iron-icon>HE</sub></h4>
                                </div>
                                <div class="plan-body">
                                    <div class="plan-body-item">
                                        <p class="valign">Mist.io as a Service. Ideal for highly dynamic infrastructures &amp; teams.</p>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="valign">
                                            <div class="valign">
                                                <h4><a href="/pricing">Pay-As-You-Go</a></h4>
                                                <h4 class="price"><sub>with free tier and <a href="/pricing">prepaid</a> plans.</sub></h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="plan-body-item grey">
                                        <div>
                                            <a aria-label="Sign up" href="/sign-up" tabindex="-1">
                                                <paper-button raised on-click="_signUpClick2">Sign up</paper-button>
                                            </a>
                                            <p>No installation. Start right away.</p>
                                        </div>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="bold">All features from EE plus:</div>
                                        <ul class="feature-list">
                                            <li id="vpn-tunnels">
                                                <iron-icon icon="help"></iron-icon> VPN tunnels
                                                <paper-tooltip for="vpn-tunnels" animation-delay="0" position="top">Manage infrastructure that's only addressable through private networks by establishing point-to-point VPN connections.</paper-tooltip>
                                            </li>
                                            <li id="recommendation-engine">
                                                <iron-icon icon="help"></iron-icon> Recommendation engine<sup>beta</sup>
                                                <paper-tooltip for="recommendation-engine" animation-delay="0" position="top">Generates automatic recommendations to optimize QoS, security and cost.</paper-tooltip>
                                            </li>
                                            <li id="anomaly-detection">
                                                <iron-icon icon="help"></iron-icon> Anomaly detection<sup>beta</sup>
                                                <paper-tooltip for="anomaly-detection" animation-delay="0" position="top">Get alerted of irregularities before they affect your uptime. Contact us for more info.</paper-tooltip>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="plan-body-item">
                                        <div class="valign bold" id="premium-support-saas">
                                            Premium Support
                                            <paper-tooltip for="premium-support-saas" animation-delay="0" position="top">Next business day.<br/>24/7 for service emergencies.</paper-tooltip>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            
        </div>

        <div class="section grey">
            <div class="contains">
                <div class="row text-center">
                    <h2 class="decorated">Help with custom needs?</h2>
                </div>
                <div class="grid-row">
                    <div class="xs12 s12 m6 l8">
                        <div class="left">
                            <h5 class="w400">Do you have more than 300 machines? <br/>Do you want to run Mist.io on premises? </h5>
                            <p> Mist.io can provide custom pricing for businesses with a lot of infrastructure.
                                <br/>Also, we can work with you to run Mist.io on premises or to setup a proof of concept. </p>
                        </div>
                    </div>
                    <div class="xs12 s12 m6 l4">
                        <h5 class="w400">Contact us if you: </h5>
                        <p>
                            <iron-icon icon="check"></iron-icon> Have more than 300 machines
                            <br/>
                            <iron-icon icon="check"></iron-icon> Want to run an on-premises POC
                            <br/>
                            <iron-icon icon="check"></iron-icon> Want help to optimize your infrastructure
                            <br/>
                            <iron-icon icon="check"></iron-icon> Require HA or 24/7 support
                            <br/>
                        </p>
                        <p>
                            <a aria-label="Get enterprise" href="/request-pricing" tabindex="-1">
                                <paper-button raised on-click="_requestInfoEnterprise" id="enterpriseBtn">Request Pricing</paper-button>
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </template>
    <script>
    Polymer({

        is: 'landing-get-started',

        properties: {
            categories: {
                type: Array
            },

            data: {
                type: Object,
                notify: true
            },

            visible: {
                type: Boolean,
                observer: '_visibleChanged'
            }

        },

        _visibleChanged: function(visible) {
            if (visible) {
                this.fire('change-section', {
                    title: 'Pricing'
                });
            }
        },

        showInfo: function(e) {
            var li = e.path.find(function(el,index){
                return el.tagName.toLowerCase() == 'li';
            });
            if (li && li.querySelector('p'))
                li.querySelector('p').classList.toggle("visible");
        },

        _signUpClick0: function(event) {
            this.fire('user-action', 'clone repo button click in pricing page');
        },

        _signUpClick1: function(event) {
            window.scrollTo(0, 0);
            this.fire('user-action', 'buy license button click in pricing page');
        },

        _signUpClick2: function(event) {
            window.scrollTo(0, 0);
            this.fire('user-action', 'saas button 2 click in pricing page');
        },

        _requestInfoEnterprise: function(event) {
            window.scrollTo(0, 0);
            this.fire('user-action', 'request info for enterprise plan in pricing page');
        },
        _computeClass: function(index) {
            return "bg-" + index + " title";
        }
    });
    </script>
</dom-module>
